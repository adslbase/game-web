/*
 Tencent ISD TencentVideo WebTeam. 
 http://v.qq.com 
 Copyright 1998 - 2012
*/

function getId(id){return document.getElementById(id);}
var QQLiveSetup={ver:"$Rev: 14295 $",curSSO:"",lastmodify:"$Date: 2012-01-06 11:42:08 +0800 (周五, 2012-01-06) $"};QQLiveSetup.log=function(msg){if(window.console){QQLiveSetup.debugid=QQLiveSetup.debugid||1;window.console.log("["+(QQLiveSetup.debugid++)+"] "+msg);}};QQLiveSetup.isDebug=-1;QQLiveSetup.debug=function(msg){if(QQLiveSetup.isDebug===-1){QQLiveSetup.isDebug=QQLiveSetup.param.getUrlParam("debug")=="true"?1:0;}
if(!!QQLiveSetup.isDebug){if(typeof __PAGE__!="undefined"){QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_DEBUGLOG,msg);}
else{QQLiveSetup.log(msg);}}}
QQLiveSetup.config={OLD_MIN_VER:"8.22.5275.0",IE_MIN_VER:"8.33.5581.0",FF_MIN_VER:"8.33.5581.0",CHROME_MIN_VER:"8.42.6278.0",STARTUP_MIN_VER:"8.14.4895.0",IE_FLASH_MIN_VER:"9.0.124.0",FF_FLASH_MIN_VER:"10.0",QQLIVE_DOWNLOAD_URL:"qqliveocx",QQLIVE_DOWNLOAD_TPTURL:"",QQLIVE_INSTALLER_CAB:"http://dl_dir.qq.com/qqtv/MMInstaller.cab#version=8,14,4895,0",FLASH_CAB:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,124,0",FLASH_SETUP_AX:"http://fpdownload.macromedia.com/get/flashplayer/current/install_flash_player_ax.exe",FLASH_SETUP_PLUGIN:"http://fpdownload.macromedia.com/get/flashplayer/current/install_flash_player.exe",MEDIAPLAYER_DOWNLOAD_URL:"http://dl_dir.qq.com/qqtv/QQLive8.42.6278.0.exe",PROGID_QQLIVE_INSTALLER:"QQLiveInstaller.InstallHelper.1",PROGID_QQLIVE_LIVEAPI:"QQLive.Application",FLASH_START:"start",PAGE_LOADING:"loading",PAGE_ERROR:"error",PAGE_NONSUPPORT:"nonsupport",PAGE_PREVINSTALL:"prevInstall",PAGE_FFERROR:"errorFFF",QQLIVE_DOWNLOAD_VERSION:"QQLive 2011",MMINSTALL_CLSID:"1DABF8D5-8430-4985-9B7F-A30E53D709B3",MMINSTALL_VER:"8,14,4895,0",OLD_IE_CLSID:"11F2A418-94B2-4E16-9B0C-B00C0435F903",OLD_FF_CLSID:"D9EBCF5D-3F8F-4B6A-89BA-70577BE73C62",SEHLL_CLSID:"f7e55bdf-9528-46ba-b550-777859627591",OCX_CLSID:"5EF7B131-C278-4034-BC88-2CE28B128681",LIVEAPI_CLSID:"4A8FD414-1EBF-4EBD-A158-0D09B005A17F",GUIDE_SWF:"http://cache.tv.qq.com/out/skins/download_guide2.swf?20091116",GUIDE_SWF_IMGCACHE:"http://imgcache.qq.com/liveportal_v1/swf/player/download_guide2.swf?20091116",OCX_URL:"http://imgcache.qq.com/liveportal_v1/toolpages/qqlive_ocx.html?v=20111212",CTRLSWF_URL:"http://imgcache.qq.com/liveportal_v1/swf/player/vodCtrl.swf",CTRLSWF_W_URL:"http://imgcache.qq.com/liveportal_v1/swf/player/vodCtrl_w.swf",PREVIEW_URL:"http://imgcache.qq.com/liveportal_v1/swf/player/qqlive_logo.swf",LOADING_URL:"http://imgcache.qq.com/liveportal_v1/swf/player/loadstart.swf",AD_SWF_URL:"http://imgcache.qq.com/liveportal_v1/swf/player/moneyplayer.swf"};QQLiveSetup.param={oldParam:{url:"URL",autoplay:"AutoPlay",type:"Type",mediafun:"MediaFun",webskin:"WebSkin"},playpage:{mousewheel:"mousewheel",oldmode:"OldMode"},shell:{ocxurl:"OcxUrl",hidescripterr:"HideScriptErr"},ocx:{mute:"Mute",volume:"Volume",fullscreen:"FullScreen",appendpausebtn:"AppendPauseBtn",programpageurl:"ProgramPageUrl"},driver:{autoplay:"autoPlay",iscontinued:"isContinued",url:"url",type:"type",adv:"adv",oid:"oid"},driverurl:{ctrlbar:"ctrlbar",ctrlheight:"ctrlh",previewurl:"previewUrl",loadingurl:"loadingUrl",previewpic:"previewPic",hidectrl:"hideCtrl",debug:"debug"},getParamBool:function(v){if(v===undefined){return false;}
if(typeof v=="string"){v=v.toLowerCase();return(v=="true"||v=="1");}
return!!v;},filterXSS:function(str){return str.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;");},getUrlParam:function(p,u){u=u||document.location.toString();var reg=new RegExp("(^|&|\\\\?)"+p+"=([^&]*)(&|$|#)");var r;if(r=u.match(reg))
return r[2];return"";},getElementObjectById:function(id){return!!window.ActiveXObject?document.getElementById(id):document.embeds[id];}};QQLiveSetup.lang={NOTSUPPORT:"该浏览器暂不支持腾讯视频播放器",STEPTIPS:"请按照以下提示安装腾讯视频播放器",CLICKBTN:"请点击按钮开始安装腾讯视频播放器",LOWVERSION:"您尚未安装腾讯视频播放器或版本过低"};QQLiveSetup.version=(function(){var _isHasQQLivePlayer=-1,_ishasOldVersion=-1,_ishasOcx=-1;_version={};function changeVerToString(nVer){if(QQLiveSetup.version.checkVerFormatValid(nVer)){return nVer;}
if(/\d+/i.test(nVer)){var nMain=parseInt(nVer/10000/100,10);var nSub=parseInt(nVer/10000,10)-nMain*100;var nReleaseNO=parseInt(nVer,10)-(nMain*100*10000+nSub*10000);strVer=nMain+"."+nSub+"."+nReleaseNO;return strVer;}
return nVer;}
return{compare:function(strVer1,strVer2){strVer1=changeVerToString(strVer1);strVer2=changeVerToString(strVer2);strVer1=strVer1.replace(/,/g,'.');strVer2=strVer2.replace(/,/g,'.');var vArray1=strVer1.split('.');var vArray2=strVer2.split('.');for(var i=0;i<4;i++){var nVer1=Number(vArray1[i]);var nVer2=Number(vArray2[i]);if(nVer1>nVer2){return 1;}
else if(nVer1<nVer2){return-1;}}
return 0;},get:function(CLSID,useOldFun){CLSID=CLSID||QQLiveSetup.config.OCX_CLSID;var k=CLSID.replace(/-/ig,"");if(!!_version[k]&&_version[k]!="0.0.0.0"&&_version[k]!="0"){return _version[k];}
var nVer=0;var verObj=QQLiveSetup.installer.getActiveXObj(QQLiveSetup.config.PROGID_QQLIVE_INSTALLER,"MMInstall.dll");if(!!verObj){try{nVer=verObj.GetVersionByClsid(CLSID);}
catch(e){if(!!useOldFun){try{nVer=verObj.GetVersion();}
catch(e2){}}}}
if(nVer!=0&&nVer!="0.0.0.0"){_version[k]=nVer;}
var logMsg="";if(CLSID==QQLiveSetup.config.OCX_CLSID){logMsg="local ocx";}
else{logMsg="local player"}
QQLiveSetup.debug(logMsg+" version is "+nVer);try{verObj.Destroy();delete verObj;verObj=null;}
catch(e){}
return nVer;},check:function(minVer){minVer=minVer||QQLiveSetup.version.getSupportMinVersion();if(!QQLiveSetup.version.checkVerFormatValid(minVer)){return false;}
var strVer;var nVer=QQLiveSetup.version.get();if(/^\d+$/.test(nVer)){strVer=changeVerToString(nVer);}
else{strVer=nVer+"";}
if(QQLiveSetup.version.compare(strVer,minVer)<0){return false;}
else{return true;}},isZero:function(ver){ver=ver||QQLiveSetup.version.get();if(/^\d+$/.test(ver)){if(ver==0)
return true;}
return QQLiveSetup.version.compare(ver,"0.0.0.0")==0;},checkVerFormatValid:function(version){return(/^(\d+\.){2}\d+(\.\d+)?$/.test(version));},hasQQLiveOcx:function(){if(_ishasOcx!=-1)
return _ishasOcx==1;var v=QQLiveSetup.version.check();_ishasOcx=!!v?1:0;return _ishasOcx;},hasOldVersion:function(){if(_ishasOldVersion!=-1)
return _ishasOldVersion==1;var v=QQLiveSetup.version.get(QQLiveSetup.config.OLD_IE_CLSID,true);if(!v)
return false;_ishasOldVersion=QQLiveSetup.version.compare(v,QQLiveSetup.config.OLD_MIN_VER)>0?1:0;return!!_ishasOldVersion;},hasQQLivePlayer:function(){if(_isHasQQLivePlayer!=-1)
return _isHasQQLivePlayer==1;var v=QQLiveSetup.version.get(QQLiveSetup.config.LIVEAPI_CLSID);if(!v)
return false;_isHasQQLivePlayer=QQLiveSetup.version.compare(v,"0.0.0.0")>0?1:0;return!!_isHasQQLivePlayer;},getSupportMinVersion:function(){if(!!QQLiveSetup.userAgent.ie){return QQLiveSetup.config.IE_MIN_VER;}
if(!!QQLiveSetup.userAgent.firefox){return QQLiveSetup.config.FF_MIN_VER;}
if(!!QQLiveSetup.userAgent.chrome){return QQLiveSetup.config.CHROME_MIN_VER;}
return"0.0.0.0";}}})();QQLiveSetup.browser=(function(){var t,vie,vff,vopera,vsf,vawk,wintype,winver,mactype,vair,vchrome,isBeta=false,discerned=false,_ua=navigator.userAgent,mainRE=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel|Minefield).(\d+\.\d+))|(?:Opera.(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/,osRE=/(Windows.*?;)|(Mac OS X.*?;)/,winRE=/Windows.+?(\d+\.\d+)/,airRE=/AdobeAIR/,chromeRE=/Chrome.(\d+\.\d+)/,safariRE=/Version\/(\d+(?:\.\d+)?)/,agent=mainRE.exec(_ua),os=osRE.exec(_ua);if(agent){vie=agent[1]?parseFloat(agent[1],10):NaN;vff=agent[2]?parseFloat(agent[2],10):NaN;t=chromeRE.exec(_ua);if(t){vchrome=t[1]?parseFloat((t[1]||"2.0"),10):NaN;}}
return{firefox:vff,ie:vie,isCanFF:function(){if(!!vff&&vff>=3.0){return true;}
return false;},isBrwValid:function(){return(!!vie||(!!vff&&vff>=3.0)||!!vchrome);},isNotIESupport:function(){return(vchrome||QQLiveSetup.browser.isCanFF());},chrome:vchrome};})();QQLiveSetup.userAgent=QQLiveSetup.browser;QQLiveSetup.installer={timer:null,installerObj:null,getInstallerHtml:function(){var str="";str+="<div id=\"qqlive_mminstaller_div\"><OBJECT classid=\"clsid:"+QQLiveSetup.config.MMINSTALL_CLSID+"\" codebase=\"http:\/\/dl_dir.qq.com\/qqtv\/MMInstaller.cab#version="+QQLiveSetup.config.MMINSTALL_VER+"\" ID=\"QQLiveInstaller\" width=\"0px\" height=\"0px\">";str+=" <embed name=\"FF_MM_Install\" id=\"FF_MM_Install\" type=\"application\/tecent-qqlive-plugin\" width=\"0px\" height=\"0px\"><\/embed>";str+="<\/OBJECT></div>";return str;},showInstallerObject:function(containerId){getId(containerId).innerHTML=QQLiveSetup.installer.getInstallerHtml();},isMMInstalled:function(){if(!!QQLiveSetup.browser.ie){try{var oDlder=new ActiveXObject(QQLiveSetup.config.PROGID_QQLIVE_INSTALLER);if(typeof oDlder.GetVersionByClsid!="undefined"){return true;}
try{oDlder.Destroy();oDlder=null;delete oDlder;}
catch(e){}
return false;}
catch(e){return false;}}
else if(QQLiveSetup.browser.isNotIESupport()){var installobj=document.embeds["FF_MM_Install"];try{installobj.CreateAX("MMInstall.dll");if(typeof installobj.GetVersionByClsid!="undefined"){return true;}
try{installobj.Destroy();installobj=null;delete installobj;}
catch(e){}
return true;}
catch(e){return false;}}
return false;},checkFFHasMMEmbed:function(){return!!getId("FF_MM_Install");},getActiveXObj:function(IEObjName,FFObjName){var obj=null;if(!!FFObjName&&(QQLiveSetup.browser.isNotIESupport())){obj=document.embeds["FF_MM_Install"];if(!obj){var _d=document.createElement("div");_d.innerHTML=QQLiveSetup.installer.getInstallerHtml();document.getElementsByTagName("body")[0].appendChild(_d);obj=document.embeds["FF_MM_Install"];}
try{obj.CreateAX(FFObjName);}
catch(e){}}
else if(!!IEObjName&&!!QQLiveSetup.browser.ie){try{obj=new ActiveXObject(IEObjName);}
catch(e){}}
return obj;},checkMMIsInstall:function(){if(!QQLiveSetup.installer.isMMInstalled())
return;clearInterval(QQLiveSetup.installer.timer);QQLiveSetup.installer.timer=null;var bVerUsable=QQLiveSetup.version.check();if(!bVerUsable){if(!QQLiveSetup.version.hasQQLiveOcx()){if(QQLiveSetup.version.hasOldVersion()){QQLiveSetup.flash.showInstallBtn(QQLiveSetup.lang.LOWVERSION);}
else{QQLiveSetup.flash.showInstallBtn(QQLiveSetup.lang.CLICKBTN);}}
else{QQLiveSetup.flash.showInstallBtn(QQLiveSetup.lang.LOWVERSION);}}
else{window.location.reload();}},hide:function(){var inst=getId("QQLiveInstaller");if(!!inst)
inst.style.display="none";},autoDownload:function(){var page=QQLiveSetup.config.PAGE_LOADING;var page_title="";if(QQLiveSetup.version.isZero()&&QQLiveSetup.version.hasOldVersion()==false){page_title="正在下载腾讯视频播放器";}
else{page_title="版本过低，正在升级腾讯视频播放器";}
if(QQLiveSetup.browser.isNotIESupport()){page=PAGE_ERROR;page_title="您尚未安装腾讯视频播放器或版本过低";}
else{if(!QQLiveSetup.installer.installerObj){QQLiveSetup.installer.installerObj=new ActiveXObject(QQLiveSetup.config.PROGID_QQLIVE_INSTALLER);}
try{QQLiveSetup.installer.installerObj.DownloadSetup(QQLiveSetup.config.QQLIVE_DOWNLOAD_URL,QQLiveSetup.config.QQLIVE_DOWNLOAD_TPTURL,1," /S",QQLiveSetup.installer.downloadCallBack);}
catch(e){page=PAGE_ERROR;page_title="自动安装腾讯视频播放器失败";QQLiveSetup.installer.onInstallErr();}}
if(!!document["UISWF"]){document["UISWF"].showPanel(page);document["UISWF"].changePanelTitle(page_title);}},downloadCallBack:function(stateType,strResult){var strState="";var strTitle="";QQLiveSetup.debug(stateType+","+strResult);switch(stateType){case 0:strState="正在准备下载...";break;case 1:if(strResult>93){strResult="93";}
strState="正在下载..."+strResult+"%";break;case 2:strResult="96";strState="正在安装..."+strResult+"%";strTitle="正在安装腾讯视频播放器，请稍候";break;case 3:strResult="100";strState="运行安装程序完毕!";strTitle="运行安装程序完毕";break;case-1:strState="启动下载失败！";break;case-2:strState="安装程序被终止！";break;case-3:strState="下载失败!";break;case-100:strState="下载路径不合法！";break;default:strState="未知状态！";break;}
if(stateType==0){QQLiveSetup.installer.onDownloadStart();}
else if(stateType==1||stateType==2||stateType==3){if(stateType==2){QQLiveSetup.installer.onDownloadEnd();QQLiveSetup.installer.onInstallStart();QQLiveSetup.event.reportTCSSHot("INSTALL.DOWNLOADED",8);}
else if(stateType==3){QQLiveSetup.installer.onInstallSuc();QQLiveSetup.event.reportTCSSHot("INSTALL.SUCCESS",16);}
try{document["UISWF"].setProgress(strResult/100);if(strTitle!=""){document["UISWF"].changePanelTitle(strTitle);}
if(stateType==3){window.location.reload();}}
catch(e){}}
else if(stateType<0){QQLiveSetup.installer.onInstallErr(stateType);QQLiveSetup.event.reportTCSSHot("INSTALL.FAILED");try{QQLiveSetup.flash.showManualInstall("自动安装腾讯视频播放器失败");QQLiveSetup.debug(strState);}
catch(e){}}},onDownloadClick:function(){},onDownloadStart:function(){},onDownloadEnd:function(){},onInstallStart:function(){},onInstallErr:function(errCode){},onInstallSuc:function(){},onManualDownClick:function(){},ERRCODE:{INIT_DOWNLOADTOOLS_ERROR:0}};QQLiveSetup.flash={getFullVersion:function(){var vflash="0.0";var swf=null;function _getFlashV(){for(var ii=11;ii>=2;ii--){try{var fl=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+ii);if(fl){vflash=ii+'.0';var vswf=swf.GetVariable("$version");if(!!vswf){vswf=vswf.replace(/^[^\d]+/g,"");vflash=vswf.replace(/,/g,".");}
fl=null;delete fl;break;}}
catch(e){}}}
if(!!QQLiveSetup.browser.ie){try{swf=new ActiveXObject('ShockwaveFlash.ShockwaveFlash');if(!swf){_getFlashV();}}
catch(e){_getFlashV();}
if(!!swf){var vswf=swf.GetVariable("$version").replace(/^[^\d]+/g,"");vflash=vswf.replace(/,/g,".");}}
else if(navigator.plugins&&navigator.plugins.length>0){swf=navigator.plugins["Shockwave Flash"];if(!!swf){var words=swf.description.split(" ");for(var i=0;i<words.length;++i){if(!isNaN(parseInt(words[i]))){vflash=words[i];break;}}}}
QQLiveSetup.debug("local flash player is "+vflash);return vflash;},getMainVer:function(){var fullversion=QQLiveSetup.flash.getFullVersion();if(fullversion.indexOf(".")>0){return fullversion.split(".")[0];}
return 0;},isFlashVerVaild:function(){var isFlashValid=false;if(!!QQLiveSetup.browser.ie){isFlashValid=QQLiveSetup.version.compare(QQLiveSetup.flash.getFullVersion(),QQLiveSetup.config.IE_FLASH_MIN_VER)==-1?false:true;}
else{isFlashValid=QQLiveSetup.version.compare(QQLiveSetup.flash.getFullVersion(),QQLiveSetup.config.FF_FLASH_MIN_VER)==-1?false:true;}
return isFlashValid;},Fresh:function(){window.location.reload();},RunQQLive:function(){window.location.href=QQLiveSetup.curSSO;},JumpUrl:function(){location.href=QQLiveSetup.config.MEDIAPLAYER_DOWNLOAD_URL;},showNotSupport:function(){if(!document["UISWF"])
return;document["UISWF"].showPanel(QQLiveSetup.config.PAGE_NONSUPPORT);document["UISWF"].changePanelTitle(QQLiveSetup.lang.NOTSUPPORT);},showInstallStep:function(){if(!document["UISWF"])
return;document["UISWF"].showPanel(QQLiveSetup.config.FLASH_START);document["UISWF"].changePanelTitle(QQLiveSetup.lang.STEPTIPS);},showManualInstall:function(title){if(!document["UISWF"])
return;if(!!QQLiveSetup.browser.ie){document["UISWF"].showPanel(QQLiveSetup.config.PAGE_ERROR);}
else{document["UISWF"].showPanel(QQLiveSetup.config.PAGE_FFERROR);}
document["UISWF"].changePanelTitle(title);},showInstallBtn:function(title){if(!document["UISWF"])
return;title=title||QQLiveSetup.lang.CLICKBTN;document["UISWF"].showPanel(QQLiveSetup.config.PAGE_PREVINSTALL);document["UISWF"].changePanelTitle(title);},fixFlashBug:function(){}};QQLiveSetup.player={startup:function(){if(QQLiveSetup.browser.isBrwValid()==false)
return;if(QQLiveSetup.flash.isFlashVerVaild()==false)
return;if(QQLiveSetup.version.check(QQLiveSetup.config.STARTUP_MIN_VER)==false)
return;window.location.href="qqlive://system_startup/";},openClient:function(p1,p2){if(!p1)
return;if(!QQLiveSetup.version.hasQQLivePlayer())
return;var sso="qqlive://sso/";if(!p2){var val=p1;if(/^\d+$/i.test(val)){sso+="projectid="+val;}
else{if(val.toLowerCase().indexOf("qqlive://sso/")>=0){sso=val;}
else if(/^[a-z0-9]{15}$/i.test(val)){sso+="vbarid="+val;}
else{return;}}}
if(!!p1&&!!p2){sso+="vbarid="+p1+"&videoid="+p2;}
var obj=QQLiveSetup.installer.getActiveXObj(QQLiveSetup.config.PROGID_QQLIVE_LIVEAPI,"");if(!!obj){try{obj.OpenQQLive(sso);return;}
catch(e){}}
window.location.href=sso;}}
function OnOk(){if(!QQLiveSetup.browser.isBrwValid()){QQLiveSetup.flash.showNotSupport();return;}
if(!QQLiveSetup.installer.isMMInstalled()){if(!!QQLiveSetup.browser.ie){QQLiveSetup.flash.showInstallStep();}
else{if(QQLiveSetup.installer.checkFFHasMMEmbed()==false){QQLiveSetup.flash.showNotSupport();return;}
QQLiveSetup.flash.showManualInstall(QQLiveSetup.lang.LOWVERSION);QQLiveSetup.installer.hide();}
return;}
if(!QQLiveSetup.version.check()){if(!!QQLiveSetup.browser.ie){if(!QQLiveSetup.version.hasQQLiveOcx()){if(QQLiveSetup.version.hasOldVersion()){QQLiveSetup.flash.showInstallBtn(QQLiveSetup.lang.LOWVERSION);}
else{QQLiveSetup.flash.showInstallBtn(QQLiveSetup.lang.CLICKBTN);}}
else{QQLiveSetup.flash.showInstallBtn(QQLiveSetup.lang.LOWVERSION);}}
else{QQLiveSetup.flash.showManualInstall(QQLiveSetup.lang.LOWVERSION);}}};function flashCall(cmd){switch(cmd){case"downloadQQLive":QQLiveSetup.installer.onManualDownClick();QQLiveSetup.flash.JumpUrl();break;case"fresh":QQLiveSetup.flash.Fresh();break;case"runQQLive":QQLiveSetup.flash.RunQQLive();break;case"installQQLive":{QQLiveSetup.installer.autoDownload();QQLiveSetup.installer.onDownloadClick();QQLiveSetup.event.reportTCSSHot("SETUP.ONECLICK",32);break;}
case"SLA":window.open("http://live.qq.com/help/index.html?id=8","_blank");break;}};QQLiveSetup.driverPage={sendMsg:function(id,v){v=v||"";window.navigate("app:OnMsg&nID="+id+"&vContent="+v);},ready:function(){window.navigate("app:PageLoaded");}};QQLiveSetup.event={rptImg:null,bind:function(obj,fn){var args=Array.prototype.slice.call(arguments,2);return function(){var _obj=obj||this,_args=args.concat(Array.prototype.slice.call(arguments,0));if(typeof(fn)=="string"){if(_obj[fn]){return _obj[fn].apply(_obj,_args);}}
else{return fn.apply(_obj,_args);}}},closeMousewheel:function(){document.onmousewheel=function(e){e=e||event;if(e.ctrlKey)
return false;}},reportTCSSHot:function(hottag,cookieFlag){var isRpt=false;if(typeof cookieFlag=="undefined"){isRpt=true;}
else{var c=QQLiveSetup.cookie.get("lv_ocx_rpt");if(!!c){c=parseInt(c);}
else{c=0;}
isRpt=!(c&cookieFlag);}
if(isRpt){if(typeof pgvSendClick=="function"){pgvSendClick({hottag:"OCX.SETUP."+hottag,virtualURL:"/virtual/ocx.html",virtualDomain:"v.qq.com"});}
else{QQLiveSetup.event.rptImg=new Image();QQLiveSetup.event.rptImg.src="http://pinghot.qq.com/pingd?dm=v.qq.com.hot&url=/virtual/ocx.html&tt="+escape(document.title)+"&hottag=OCX.SETUP."+hottag+"&hotx=9999&hoty=9999&rand="+Math.round(Math.random()*100000);}
QQLiveSetup.cookie.set("lv_ocx_rpt",(c|cookieFlag),document.location.hostname||document.location.hostname);}}}
QQLiveSetup.cookie={set:function(name,value,domain,path,hour){if(hour){var today=new Date();var expire=new Date();expire.setTime(today.getTime()+3600000*hour);}
if(name.indexOf("ql_")<0){name="ql_"+name;}
document.cookie=name+"="+value+"; "+(hour?("expires="+expire.toGMTString()+"; "):"")+(path?("path="+path+"; "):"path=/; ")+(domain?("domain="+domain+";"):("domain=qq.com;"));return true;},get:function(name){if(name.indexOf("ql_")<0){name="ql_"+name;}
var r=new RegExp("(?:^|;+|\\s+)"+name+"=([^;]*)");var m=document.cookie.match(r);return(!m?"":m[1]);},del:function(name,domain,path){var exp=new Date();exp.setTime(exp.getTime()-1);document.cookie=name+"=; expires="+exp.toGMTString()+";"+(path?("path="+path+"; "):"path=/; ")+(domain?("domain="+domain+";"):("domain=qq.com;"));}};var IsInstall=QQLiveSetup.installer.isMMInstalled;var CheckVersion=QQLiveSetup.version.check;var QQLiveSetup=QQLiveSetup||{};QQLiveSetup.DEFINE={STATUS:{NOT_INITED:-1,INIT:0,READY:4,PLAYING:7,STOP:1,LOADING:2,PAUSE:6,Buffering:8,Paused_Buffering:9,END:91},EVENT:{LOADSTART:"LoadStart",LOADING:"Loading",PLAY:"Play",STOP:"Stop",PAUSE:"Pause",PLAYNEXT:"PlayNext",PLAYPREV:"PlayPrev",MUTE:"Mute",FULLSCREEN:"FullScreen",VIDEOREADY:"VideoReady",PROGESS:"Progress",END:"End",VIDEOCHANGE:"VideoChange",VOLUMECHANGE:"VolumeChange",MOUSEMOVE:"MouseMove",DBCLICK:"DBClick",TYPECHANGE:"TypeChange",CHECK_MMINSTALLER:"CheckMMInstall",CHECK_FLASH:"CheckFlash",CHECK_VERSION:"CheckVersion",SHOW_PLAYER:"ShowPlayer",DIRVER_PAGE_INITED:"DirverPageInited",OCX_READY:"PlayerReady",GUIDE_FLASH_INITED:"GuideFlashInited",UPDATE_SSO:"UpdateSSO",PAUSE_BTN_CLICK:"PauseBtnClick",FULLSCREEN_BTN_CLICK:"FullScreenBtnClick",CAN_PREV:"CanPrev",CAN_NEXT:"CanNext",OCX_INIT_FAILED:"OcxInitFailed",SCRIPT_ERROR:"ScriptError"},MSG:{LIVE_OCX_EVENT_ONMSG_PLAYING:1,LIVE_OCX_EVENT_ONMSG_PAUSED:2,LIVE_OCX_EVENT_ONMSG_STOPED:3,LIVE_OCX_EVENT_PREPLAY_LOADING:4,LIVE_OCX_EVENT_ONMSG_LOADSTART:7,LIVE_OCX_EVENT_ONMSG_MOUSEMOVE:9,LIVE_OCX_EVENT_ONMSG_LBUTTONDOWN:12,LIVE_OCX_EVENT_ONMSG_LBUTTONDBLCLK:14,LIVE_OCX_EVENT_ONMSG_START:15,LIVE_OCX_EVENT_ONMSG_VOLUME_UP:23,LIVE_OCX_EVENT_ONMSG_VOLUME_DOWN:24,LIVE_OCX_EVENT_ONMSG_MUTE:25,LIVE_OCX_EVENT_ONMSG_CANPRE:26,LIVE_OCX_EVENT_ONMSG_CANNEXT:27,LIVE_OCX_EVENT_ONMSG_BUF_RESUME_PLAY:30,LIVE_OCX_EVENT_ONMSG_PAUSE_RESUME_PLAY:31,LIVE_OCX_EVENT_ONMSG_PLAY_PAUSE_CLICK:32,LIVE_OCX_EVENT_ONMSG_COMMAND:100,LIVE_DRIVERPAGE_EVENT_FLASH_INITED:501,LIVE_DRIVERPAGE_EVENT_ALL_INITED:502,LIVE_PAGE_EVENT_GUIDEFLSAH_INITED:503,LIVE_DRIVERPAGE_EVENT_UPDATESSO:504,LIVE_CTRLBAR_EVENT_PAUSECLICK:505,LIVE_CTRLBAR_EVENT_FULLSCREENCLICK:506,LIVE_OCX_EVENT_FULLSCREEN_SWITCH:507,LIVE_DRIVERPAGE_EVENT_OCX_INIT_FAILED:508,LIVE_DRIVERPAGE_EVENT_JS_ERROR:509,LIVE_DRIVERPAGE_EVENT_DEBUGLOG:510,LIVE_OCX_EVENT_ONMSG_FLV_PROGRAM_END:1003,LIVE_OCX_EVENT_ONMSG_FLV_TOTAL_TIME:1005},COMMANDID:{IDM_RBUTTON_PLAY_PAUSE:11251,IDM_RBUTTON_PRE:11253,IDM_RBUTTON_NEXT:11254,HOT_KEY_FULLSCREEN:11302},PROGRESS_EVENT:{FLV_LOADING:2,FLV_HEAD_TOTAL_TIME:3},KEYCODE:{HOTKEYF_SHIFT:0x01,HOTKEYF_CONTROL:0x02,HOTKEYF_ALT:0x04,HOTKEYF_EXT:0x08,VK_RETURN:0x0D,VK_ESCAPE:0x1B,VK_SPACE:0x20,VK_LEFT:0x25,VK_UP:0x26,VK_RIGHT:0x27,VK_DOWN:0x28},VIDEOTYPE:{UNKNOWN:0,LIVE:1,VOD:8},AD_EVENT:{ERROR:"Error",DATALOADED:"DataLoaded",DOWNLOADED:"Downloaded",PLAYEND:"PlayEnd"}}
var QQLiveCtrlBarProvider=function(conf){var $me=this;this.config=conf;this.swfid=this.config.swfid;if(!!this.config.ctrlDivId){this.ctrlDiv=getId(this.config.ctrlDivId);}
this.ctrlObj=!!window.ActiveXObject?document.getElementById(this.swfid):document.embeds[this.swfid];var bind=QQLiveSetup.event.bind;new function(){for(var p in QQLiveSetup.DEFINE.EVENT){this["on"+QQLiveSetup.DEFINE.EVENT[p]+"Call"]=function(){};this["on"+QQLiveSetup.DEFINE.EVENT[p]+"Click"]=function(){}}}();this.bindCall=function(funName,fn){this.prototype["on"+funName+"Call"]=bind(this,fn);}
this.bindClick=function(funName,fn){this.prototype[this.getClickEvtName(funName)]=bind(this,fn);}
this.getClickEvtName=function(funName){return"on"+funName+"Click";}
this.resize=function(width,height){$me.ctrlObj.style.width=width;$me.ctrlObj.style.height=height;};this.setMarginTop=function(vTop){if(!isNaN(vTop))
vTop=vTop+"px";if(!!$me.ctrlDiv){$me.ctrlDiv.style.position="absolute";$me.ctrlDiv.style.marginTop=vTop;}};this.showDiv=function(){if(!!$me.ctrlDiv){$me.ctrlDiv.style.display="";}}};var QQLiveOCXProvider=function(config){config=config||{};var $me=this;var $=document.getElementById;var $EMB=function(v){return document.embeds[v];}
var emptyFn=function(){};var currentPlaySSO="";var ocxObj=null;var timer={};var ocxProp={};var currentTime=0,totalTime=0;function funCallBack(funName){var args=Array.prototype.slice.call(arguments,1);var strFn="on"+funName;if(typeof $me[strFn]=="function"){$me[strFn].apply($me,args);}}
function updateSSO(curid){var sso=config.url;var vbarid=QQLiveSetup.param.getUrlParam("vbarid",sso);var videoid=QQLiveSetup.param.getUrlParam("videoid",sso);var projectid=QQLiveSetup.param.getUrlParam("projectid",sso);if(isNaN(curid)){sso="qqlive://sso/vbarid="+vbarid+"&videoid="+curid;}
else{sso="qqlive://sso/projectid="+projectid;}
config.url=sso;QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_UPDATESSO,sso);}
function ocxMsgCall(id,content){switch(id){case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_START:funCallBack(QQLiveSetup.DEFINE.EVENT.VIDEOREADY);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_LOADSTART:updateSSO(content);funCallBack(QQLiveSetup.DEFINE.EVENT.LOADSTART,$me.getType());break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_PREPLAY_LOADING:funCallBack(QQLiveSetup.DEFINE.EVENT.LOADING,content);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_PLAYING:case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_PAUSE_RESUME_PLAY:funCallBack(QQLiveSetup.DEFINE.EVENT.PLAY);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_PAUSED:funCallBack(QQLiveSetup.DEFINE.EVENT.PAUSE);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_STOPED:funCallBack(QQLiveSetup.DEFINE.EVENT.STOP);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_FLV_PROGRAM_END:funCallBack(QQLiveSetup.DEFINE.EVENT.END);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_LBUTTONDBLCLK:funCallBack(QQLiveSetup.DEFINE.EVENT.DBCLICK);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_MUTE:funCallBack(QQLiveSetup.DEFINE.EVENT.MUTE,ocxObj.Mute);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_VOLUME_UP:case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_VOLUME_DOWN:funCallBack(QQLiveSetup.DEFINE.EVENT.VOLUMECHANGE,content);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_PLAY_PAUSE_CLICK:$me.switchPause();break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_MOUSEMOVE:funCallBack(QQLiveSetup.DEFINE.EVENT.MOUSEMOVE,content);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_CANPRE:funCallBack(QQLiveSetup.DEFINE.EVENT.CAN_PREV,content);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_CANNEXT:funCallBack(QQLiveSetup.DEFINE.EVENT.CAN_NEXT,content);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_COMMAND:{switch(content){case QQLiveSetup.DEFINE.COMMANDID.IDM_RBUTTON_PLAY_PAUSE:{switch($me.getStatus()){case QQLiveSetup.DEFINE.STATUS.INIT:case QQLiveSetup.DEFINE.STATUS.STOP:$me.start();break;case QQLiveSetup.DEFINE.STATUS.PLAYING:$me.pause();break;case QQLiveSetup.DEFINE.STATUS.PAUSE:$me.play();break;}
break;}
case QQLiveSetup.DEFINE.COMMANDID.HOT_KEY_FULLSCREEN:{$me.switchFullScreen();break;}
case QQLiveSetup.DEFINE.COMMANDID.IDM_RBUTTON_NEXT:{$me.playNext();break;}
case QQLiveSetup.DEFINE.COMMANDID.IDM_RBUTTON_PRE:{$me.playPrev();break;}
default:break;}
break;}
default:break;}
$me.sendMsg(id,content);}
function ocxProgressCall(uID,uParam,uParam2){if(uID==QQLiveSetup.DEFINE.PROGRESS_EVENT.FLV_HEAD_TOTAL_TIME){currentTime=uParam;totalTime=uParam2;}
funCallBack(QQLiveSetup.DEFINE.EVENT.PROGESS,uID,uParam,uParam2);}
this._inited=false;this.config={url:"",ctrl:null,width:0,height:0,isContinued:true}
this.setParam=function(k,v){if(typeof k!="string")
return;switch(k.toLowerCase()){case"programpageurl":ocxProp.ProgramPageUrl=v;break;case"mute":ocxProp.Mute=QQLiveSetup.param.getParamBool(v);if(this._inited){this.setMute(v);}
break;case"volume":ocxProp.Volume=v;if(this._inited){this.setVolume(v,false);}
break;case"fullscreen":ocxProp.FullScreen=!!v;if(this._inited){this.setFullScreen(v);}
break;case"appendpausebtn":ocxProp.AppendPauseBtn=QQLiveSetup.param.getParamBool(v)?1:0;break;case"url":config.url=v;break;case"iscontinued":config.isContinued=QQLiveSetup.param.getParamBool(v);break;}}
this.init=function(){for(var i in config){this.config[i]=config[i];};config=this.config;ocxObj=QQLiveSetup.param.getElementObjectById(config.ocxId);if(!ocxObj){throw new Error("QQLive OCX Object is null");}
for(var p in ocxProp){if(p.toLowerCase()=="programpageurl"){ocxObj.SetPageUrl(ocxProp[p]);}
else{ocxObj[p]=ocxProp[p];}}
if(QQLiveSetup.userAgent.ie){ocxObj.attachEvent("OnMsg",ocxMsgCall)
ocxObj.attachEvent("OnProgress",ocxProgressCall);}
else{ocxObj.AddEventListener("OnMsg",ocxMsgCall,false);ocxObj.AddEventListener("OnProgress",ocxProgressCall,false);}
funCallBack("Init");this._inited=true;};this.getOcx=function(){return ocxObj;};this.getSSO=function(){return config.url;};this.getType=function(){return ocxObj.Type;}
this.getStatus=function(){if(!ocxObj)
return QQLiveSetup.DEFINE.STATUS.NOT_INITED;return ocxObj.Status;},this.isPlaying=function(){return $me.getStatus()==QQLiveSetup.DEFINE.STATUS.PLAYING;};this.isMute=function(){return!!ocxObj.Mute;};this.isLive=function(){return $me.getType()==QQLiveSetup.DEFINE.VIDEOTYPE.LIVE}
this.isFullScreen=function(){return!!ocxObj.FullScreen;}
this.getCurrentTime=function(){return currentTime;};this.setCurrentTime=function(v){currentTime=v;}
this.getTotalTime=function(){return totalTime;}
this.start=function(sso){sso=sso||$me.getSSO();if(!sso)
return;if(!isNaN(sso)){sso="qqlive://sso/projectid="+sso;}
if(sso.toLowerCase().indexOf("qqlive://sso")!=0){return;}
config.url=sso;if($me.getStatus()==QQLiveSetup.DEFINE.STATUS.PLAYING){$me.stop();}
try{ocxObj.StartTask(sso);currentPlaySSO=sso;}
catch(e){funCallBack(QQLiveSetup.DEFINE.EVENT.OCX_INIT_FAILED);}};this.isSSOChange=function(){return config.url!=currentPlaySSO;}
this.play=function(){ocxObj.Play();};this.stop=function(){ocxObj.Stop();};this.pause=function(){if($me.getStatus()==QQLiveSetup.DEFINE.STATUS.LOADING){return;}
ocxObj.Pause();};this.switchPause=function(){if($me.getStatus()==QQLiveSetup.DEFINE.STATUS.PLAYING){$me.pause();}
else if($me.getStatus()==QQLiveSetup.DEFINE.STATUS.PAUSE){$me.play();}}
this.playNext=function(){if($me.isCanNext()){funCallBack(QQLiveSetup.DEFINE.EVENT.PLAYNEXT);ocxObj.PlayNext(false);}},this.playPrev=function(){if($me.isCanPrev()){funCallBack(QQLiveSetup.DEFINE.EVENT.PLAYPREV);ocxObj.PlayNext(true);}};this.setMute=function(isMute){ocxObj.Mute=ocxProp.Mute=!!isMute;}
this.switchMute=function(){$me.setMute(!ocxObj.Mute);}
this.setFullScreen=function(isFull){if(!!isFull){window.navigate('app:FullScreen&bFull=1');ocxObj.FullScreen=1;}
else{window.navigate('app:FullScreen&bFull=0');ocxObj.FullScreen=0;}
funCallBack(QQLiveSetup.DEFINE.EVENT.FULLSCREEN,isFull);}
this.switchFullScreen=function(){this.setFullScreen(!ocxObj.FullScreen);}
this.sendMsg=function(id,v){QQLiveSetup.driverPage.sendMsg(id,v);}
this.setVolume=function(v,isShow){if(v==undefined)
return;isShow=isShow||false;v=v<0?0:v;ocxProp.Volume=v;ocxObj.SetVolume(v,isShow);};this.getVolume=function(){return ocxObj.Volume;}
this.startSeek=function(){ocxObj.SeekBegin();}
this.seek=function(v){if(v>100||v<0)
return;ocxObj.Seek(v);ocxObj.SeekEnd();};this.isCanNext=function(){return!!ocxObj.CanNext;};this.isCanPrev=function(){return!!ocxObj.CanPre;}
this.showPrompt=function(msg){ocxObj.ShowPrompt(msg);}
this.bindCall=function(funName,fn){this["on"+funName]=QQLiveSetup.event.bind(this,fn);}
this.resize=function(w,h){ocxObj.style.width=w+"px";ocxObj.style.height=h+"px";}
for(var fn in QQLiveSetup.DEFINE.EVENT){this.bindCall(fn,emptyFn);}
this.bindCall(QQLiveSetup.DEFINE.EVENT.VIDEOREADY,$me.play);this.bindCall(QQLiveSetup.DEFINE.EVENT.LOADSTART,$me.play);this.bindCall(QQLiveSetup.DEFINE.EVENT.END,function(){if(config.isContinued){if($me.isCanNext()){$me.playNext();}}});this.bindCall(QQLiveSetup.DEFINE.EVENT.DBCLICK,$me.switchFullScreen);};var QQLive_SetParam=function(){};var QQLive_Play=function(){};var QQLive_Pause=function(){};var QQLive_Stop=function(){};var QQLive_TranslateAccelerator=function(){};var QQLive_Resize=function(){};var QQLivePlayer=(function(){var timer={},config={},isADEnd=true,isADOK=false,isADDownload=false,isVideoReady=false;var showDiv=null,QQLiveOcx=null,QQLiveCtrl=null,ocxDiv=null;var ctrlSwf=null,ctrlDiv=null,prefixDiv=null,prefixSwf=null;var loadingDiv=null,loadingSwf=null;var adDiv=null,adSwf=null;var curMouseY=0,prefixSwfId="_prefixSwf",loadingSwfId="_loadingSwf",adSwfId="_adSwf";var btnCache=null;var curShowType=0,curOutputType=0;var ELE_TYPE={prefix:1,loading:2,ocx:4,previewpic:8,ad:16}
var ocxProp={Mute:0,Volume:50,FullScreen:0,OcxMode:3,autoPlay:true,type:QQLiveSetup.DEFINE.VIDEOTYPE.VOD,url:"",adv:"",oid:""};var driverProp={};var keyCallDict={},keyPressDict={};function setShowType(type){curShowType=type;};function isShow(type){return curShowType==type;};function addOutput(type){curOutputType=curOutputType|type;};function isOutput(type){return curOutputType&type;};function getRealKeyCode(lowKey,highKey){lowKey=lowKey||0;highKey=highKey||0;return lowKey&0xffff|highKey<<16;}
function addBtnCache(evt){btnCache=evt;}
function clearBtnCache(evt){btnCache=null;}
function isHasBtnCache(evt){return btnCache==evt;}
function getOcxHeight(h){h=h||config.height;return config.hideCtrl?h:h-config.ctrlHeight;}
function addKeyFunItem(lowKey,highKey,fun,isPress){var key=getRealKeyCode(lowKey,highKey);keyCallDict[key]=fun;if(!!isPress){keyPressDict[key]=1;}};function showDivMouseOver(){if(isShow(ELE_TYPE.ocx))
return;if(window.event.srcElement.tagName=="DIV"){QQLiveCtrl.setMarginTop(-1*config.ctrlHeight);}
else{QQLiveCtrl.setMarginTop(0);}}
function createFlashHtml(swfid,swfurl,width,height,extParam){var _w,_h;_w=QQLiveSetup.param.getUrlParam("width",swfurl);_h=QQLiveSetup.param.getUrlParam("height",swfurl);width=width||_w||config.width;height=height||_h||config.ocxHeight;var str="";if(!!QQLiveSetup.userAgent.ie){str+="<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+width+"\" height=\""+height+"\" id=\""+swfid+"\" name=\""+swfid+"\" align=\"middle\" codebase=\"http:\/\/fpdownload.macromedia.com\/get\/flashplayer\/current\/swflash.cab#version=10,0,0,0\">";str+="   <param name=\"allowScriptAccess\" value=\"always\" \/>";str+="   <param name=\"movie\" value=\""+swfurl+"\">";str+="   <param name=\"quality\" value=\"high\" \/>";str+="   <param name=\"bgcolor\" value=\"#000000\" \/>";str+="   <param name=\"play\" value=\"true\" \/>";str+="   <param name=\"type\" value=\"application\/x-shockwave-flash\" \/>";str+="   <param name=\"pluginspage\" value=\"http:\/\/www.macromedia.com\/go\/getflashplayer\" \/>";if(!!extParam){for(var p in extParam){str+="<param name=\""+p+"\" value=\""+extParam[p]+"\" \/>";}}
str+="<\/object>";}
else{str+="<embed src=\""+swfurl+"\" quality=\"high\" id=\""+swfid+"\" name=\""+swfid+"\" bgcolor=\"#000000\" width=\""+width+"\" height=\""+height+"\" align=\"middle\" allowScriptAccess=\"always\" type=\"application\/x-shockwave-flash\" pluginspage=\"http:\/\/www.macromedia.com\/go\/getflashplayer\"";if(!!extParam){for(var p in extParam){str+=" "+p+"=\""+extParam[p]+"\"";}}
str+=" \/>";}
return str;};function outputPreviewPic(){if(!prefixDiv)
return;var str="<img src='"+config.previewPic+"' width="+config.width+"' height='"+config.ocxHeight+"' />";prefixDiv.innerHTML=str;addOutput(ELE_TYPE.previewpic);}
function showPreviewPic(){if(isShow(ELE_TYPE.previewpic))
return;if(!isOutput(ELE_TYPE.previewpic)){outputPreviewPic();}
showDiv.scrollTop=prefixDiv.offsetTop;setShowType(ELE_TYPE.previewpic);}
function outputPrefix(){if(!prefixDiv)
return;var str=createFlashHtml(prefixSwfId,config[QQLiveSetup.param.driverurl.previewurl]||QQLiveSetup.config.PREVIEW_URL,null,null,{"wmode":"Opaque","Scale":"NoScale"});prefixDiv.innerHTML=str;addOutput(ELE_TYPE.prefix);};function outputLoading(){if(!loadingDiv)
return;var str=createFlashHtml(loadingSwfId,config[QQLiveSetup.param.driverurl.loadingurl]||QQLiveSetup.config.LOADING_URL,null,null,{"wmode":"Opaque"});loadingDiv.innerHTML=str;loadingSwf=QQLiveSetup.param.getElementObjectById(loadingSwfId);addOutput(ELE_TYPE.loading);QQLiveSetup.flash.fixFlashBug();}
function outputAD(){if(!adDiv)
return;var str=createFlashHtml(adSwfId,QQLiveSetup.config.AD_SWF_URL,null,null,{"wmode":"Opaque"});adDiv.innerHTML=str;QQLiveSetup.flash.fixFlashBug();adSwf=QQLiveSetup.param.getElementObjectById(adSwfId);addOutput(ELE_TYPE.ad);adDiv.style.marginTop=config.ctrlHeight+"px";}
function outputOcx(){if(isOutput(ELE_TYPE.ocx))
return;var strHtml="";strHtml="<Object id='"+config.ocxId+"' width=100%";strHtml+=" height="+getOcxHeight();strHtml+=" classid=CLSID:";strHtml+=QQLiveSetup.config.OCX_CLSID;strHtml+=" standby=\"Loading Tencent QQ视频 componets...\">";strHtml+=" </Object>";ocxDiv.innerHTML=strHtml;ocxDiv.style.marginTop=(config.hideCtrl?config.ctrlHeight:0)+"px";addOutput(ELE_TYPE.ocx);}
function outputCtrlSwf(){var str=createFlashHtml(config.ctrlId,config.ctrlUrl,null,config.ctrlHeight,{"wmode":"window"});ctrlDiv.style.marginTop=document.body.clientHeight-config.ctrlHeight+"px";ctrlDiv.innerHTML=str;QQLiveSetup.flash.fixFlashBug();QQLiveCtrl=new QQLiveCtrlBarProvider({"swfid":config.ctrlId,"ctrlDivId":config.ctrlDivId});ctrlSwf=QQLiveCtrl.ctrlObj;}
function showPrefix(){if(prefixDiv){if(!isOutput(ELE_TYPE.prefix))
outputPrefix();showDiv.scrollTop=prefixDiv.offsetTop;showDiv.style.height=getOcxHeight();if(config.hideCtrl){prefixDiv.style.height=config.ocxHeight;loadingDiv.style.marginTop=config.ctrlHeight;}
setShowType(ELE_TYPE.prefix);}
if(!!QQLiveOcx){if(QQLiveOcx.isFullScreen())
QQLiveOcx.setFullScreen(false);}
if(config.hideCtrl){showDiv.attachEvent("onmouseover",showDivMouseOver);}
showLoadingProgess(0);}
function resetFlashDivPosition(divobj,swfobj,isfullScreen){if(isfullScreen==undefined)
isfullScreen=!!QQLiveOcx?QQLiveOcx.isFullScreen():config[QQLiveSetup.param.ocx.fullscreen];if(!!isfullScreen){divobj.style.width="100%";divobj.style.height=document.body.clientHeight-config.ctrlHeight+"px";swfobj.style.width="100%";swfobj.style.height=document.body.clientHeight-config.ctrlHeight+"px";showDiv.style.height=document.body.clientHeight;showDiv.attachEvent("onmouseover",showDivMouseOver);}
else{divobj.style.width="100%";divobj.style.height=config.ocxHeight+"px";swfobj.style.width="100%";swfobj.style.height=config.ocxHeight+"px";showDiv.style.height=getOcxHeight();showDiv.detachEvent("onmouseover");}
showDiv.scrollTop=divobj.offsetTop;}
function resetLoadingPosition(isfullScreen){resetFlashDivPosition(loadingDiv,loadingSwf,isfullScreen);}
function resetADPosition(isfullScreen){resetFlashDivPosition(adDiv,adSwf,isfullScreen);if(!isfullScreen){if(config.hideCtrl){adDiv.style.marginTop=config.ctrlHeight+"px";}}}
function showLoading(){if(isShow(ELE_TYPE.loading))
return;if(loadingDiv){if(!isOutput(ELE_TYPE.loading)){outputLoading();}
showLoadingProgess(0);resetLoadingPosition();if(config.hideCtrl){showDiv.attachEvent("onmouseover",showDivMouseOver);}
setShowType(ELE_TYPE.loading);}}
function showAD(){clearTimeout(timer.prefix);if(isShow(ELE_TYPE.ad)){return;}
if(adDiv){if(!isOutput(ELE_TYPE.ad)){outputAD();}
resetADPosition();if(config.hideCtrl){showDiv.attachEvent("onmouseover",showDivMouseOver);}
setShowType(ELE_TYPE.ad);}}
function initOcx(){outputOcx();if(!QQLiveOcx)
pub.bindOcxInterface();}
function showOcx(){if(isOutput(ELE_TYPE.ocx)&&isShow(ELE_TYPE.ocx)&&QQLiveOcx)
return;if(!isOutput(ELE_TYPE.ocx)){initOcx();}
showDiv.scrollTop=ocxDiv.offsetTop;showLoadingProgess(0);if(config.hideCtrl){showDiv.detachEvent("onmouseover");}
setShowType(ELE_TYPE.ocx);}
function showLoadingProgess(v){if(!loadingSwf||typeof loadingSwf.setLoadingText!="function")
return;var str="";if(isNaN(v)){str=v;}
else{str="正在加载";if(!!v){str+=" "+(v>=100?95:v)+"%";}
str+="...";}
try{loadingSwf.setLoadingText(str);}
catch(e){};}
function decodeURLParam(str){return QQLiveSetup.param.filterXSS(decodeURIComponent(str));}
function getUrlParam(){QQLiveSetup.isDebug=QQLiveSetup.param.getParamBool(QQLiveSetup.param.getUrlParam(QQLiveSetup.param.driverurl.debug));config.ctrlHeight=decodeURLParam(QQLiveSetup.param.getUrlParam(QQLiveSetup.param.driverurl.ctrlheight))||50;config.width=decodeURLParam(QQLiveSetup.param.getUrlParam("w"))||558;config.height=decodeURLParam(QQLiveSetup.param.getUrlParam("h"))||422;config.ocxHeight=(document.body.clientHeight==0?parseInt(config.height,10):document.body.clientHeight)-config.ctrlHeight;config.previewPic=decodeURLParam(QQLiveSetup.param.getUrlParam(QQLiveSetup.param.driverurl.previewpic))||"";config[QQLiveSetup.param.driverurl.loadingurl]=decodeURLParam(QQLiveSetup.param.getUrlParam(QQLiveSetup.param.driverurl.loadingurl))||"";config[QQLiveSetup.param.driverurl.previewurl]=decodeURLParam(QQLiveSetup.param.getUrlParam(QQLiveSetup.param.driverurl.previewurl))||"";config.ctrlUrl=decodeURLParam(QQLiveSetup.param.getUrlParam(QQLiveSetup.param.driverurl.ctrlbar))||QQLiveSetup.config.CTRLSWF_URL;config.hideCtrl=QQLiveSetup.param.getParamBool(QQLiveSetup.param.getUrlParam(QQLiveSetup.param.driverurl.hidectrl));if(!!QQLiveSetup.isDebug){QQLiveSetup.log("-----ocx param config-----");for(var p in config){QQLiveSetup.log(p+"="+config[p]);}
QQLiveSetup.log("-----ocx param config-----");}}
function getVideoPlayTimes(sec){sec=parseInt(sec,10);var min=0;var hour=0;if(sec>=60){min=Math.floor(sec/60);sec=sec%60;}
if(min>=60){hour=Math.floor(min/60);min=min%60;}
var arr=[];if(min<10)
min="0"+min
if(hour<10){hour="0"+hour;}
arr.push(hour);arr.push(min);if(sec<10)
sec="0"+sec;arr.push(sec);return arr.join(":");}
function ocxStart(sso){try{QQLiveSetup.debug("fetching video data...");QQLiveOcx.start(sso||"");}
catch(e){onOcxInitFailed();};};function playvideo(){isVideoReady=true;if(adprovider.isPlayEnd()){QQLiveSetup.debug("ad play is end,play video...");QQLiveOcx.play();}
else{QQLiveSetup.debug("ad play is not end,wait for ad play to end...");}}
function setADV(){var adv=ocxProp[QQLiveSetup.param.driver.adv];if(adv==undefined){adv="";}
if(adv!="0"||!!ocxProp["oid"]){config.isAD=true;}
else{config.isAD=false;}
QQLiveSetup.debug("config.isAD="+config.isAD);}
function onOcxInitFailed(){if(isShow(ELE_TYPE.loading)){showLoadingProgess("初始化播放控件失败，请刷新页面重试");}
QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_OCX_INIT_FAILED);};var adprovider={isPlayEnd:function(){if(!config.isAD)
return true;return!!isADEnd;},setPlayEnd:function(b){if(isShow(ELE_TYPE.loading)&&!b){return;}
QQLiveSetup.debug("set play end ="+(!!b?"true":"false"));isADEnd=!!b;},isAdDownload:function(){return(!!adSwf&&typeof adSwf.playAd=="function");},isNeedShowAd:function(){return!!(adprovider.getAdId()||ocxProp["oid"]);},getAdId:function(){var confADv=ocxProp[QQLiveSetup.param.driver.adv];if(!!confADv){return confADv;}
var _sso=QQLiveOcx.getSSO();if(_sso.toLowerCase().indexOf("projectid")>0){var _projectid=QQLiveSetup.param.getUrlParam("projectid",_sso);return _projectid;}
return"";},showAd:showAD,outputAd:outputAD,playAd:function(type,adid){QQLiveSetup.debug("playAd");if(!isADOK){showLoading();return;}
type=type||"0";adid=adid||adprovider.getAdId();isVideoReady=false;QQLiveSetup.debug("adSwf.playAd("+type+","+adid+","+ocxProp["oid"]+")");QQLiveSetup.debug("oid="+ocxProp["oid"]);adSwf.playAd(type,adid,""+ocxProp["oid"]);adprovider.setPlayEnd(false);},showLoadingAD:function(){QQLiveSetup.debug("ready to show loading ad...");showAD();adprovider.playAd("0",adprovider.getAdId());},onError:function(){QQLiveSetup.debug("ad error");adprovider.setPlayEnd(true);adprovider.onPlayEnd();},onDataOk:function(){QQLiveSetup.debug("ad data ok");isADOK=true;adprovider.showLoadingAD();},onDownloadEnd:function(){QQLiveSetup.debug("ad download end");ocxStart();},onPlayEnd:function(){QQLiveSetup.debug("ad play end");adprovider.setPlayEnd(true);if(QQLiveOcx.getStatus()<=QQLiveSetup.DEFINE.STATUS.STOP){ocxStart();}
if(!!isVideoReady){playvideo();}
else{showLoading();if(ctrlSwf){ctrlSwf.setStopBtnEnable(true);ctrlSwf.setFullbtnEnable(true);}}}};var pub={init:function(_conf){QQLiveSetup.debug("QQLivePlayer.init");QQLiveSetup.event.closeMousewheel();config=_conf;getUrlParam();QQLive_SetParam=QQLivePlayer.setParam;QQLive_Play=QQLivePlayer.play;QQLive_Pause=QQLivePlayer.onPauseClick;QQLive_Stop=QQLivePlayer.onStopClick;QQLive_Resize=QQLivePlayer.onShellResize;showDiv=getId(config.showDivId);ocxDiv=getId(config.ocxDivId);ctrlDiv=getId(config.ctrlDivId);loadingDiv=getId(config.loadingDivId);adDiv=getId(config.adDivId);if(!ocxDiv||!ctrlDiv)
return;if(!!showDiv){showDiv.style.height=getOcxHeight();}
outputCtrlSwf();prefixDiv=getId(config.prefixDivId);return true;},setParam:function(k,v){v=QQLiveSetup.param.filterXSS(v);k=k.toLowerCase();if(k in QQLiveSetup.param.ocx){ocxProp[QQLiveSetup.param.ocx[k]]=v;return;}
if(k in QQLiveSetup.param.driver){ocxProp[QQLiveSetup.param.driver[k]]=v;if(k==QQLiveSetup.param.driver.adv.toLowerCase()){setADV();}
return;}
if(k=="width"||k=="height"){config[k]=v;}},bindHotKey:function(){QQLiveSetup.debug("[bindHotKey]");function enterKeyFun(){if(isShow(ELE_TYPE.prefix)||isShow(ELE_TYPE.ad))
return;pub.onFullScreenClick(!QQLiveOcx.isFullScreen());};function spaceKeyFun(){if(QQLiveOcx.isPlaying()){pub.onPauseClick(false);}
else{pub.onPlayClick();}};function escKeyFun(){if(!QQLiveOcx.isFullScreen())
return;pub.onFullScreenClick(false);};addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_UP,QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_ALT+QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_EXT,pub.upVolume,true);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_DOWN,QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_ALT+QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_EXT,pub.downVolume,true);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_RIGHT,QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_CONTROL+QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_EXT,pub.goFF,true);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_LEFT,QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_CONTROL+QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_EXT,pub.backward,true);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_RIGHT,QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_EXT,pub.goFF,true);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_LEFT,QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_EXT,pub.backward,true);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_SPACE,null,spaceKeyFun);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_ESCAPE,null,escKeyFun,false);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_RETURN,null,enterKeyFun,false);addKeyFunItem(QQLiveSetup.DEFINE.KEYCODE.VK_RETURN,QQLiveSetup.DEFINE.KEYCODE.HOTKEYF_EXT,enterKeyFun,false);},bindOcxInterface:function(){QQLiveSetup.debug("[bindOcxInterface]");QQLiveOcx=new QQLiveOCXProvider({"ocxId":config.ocxId||"OcxObj"});QQLive_TranslateAccelerator=pub.onTranslateAccelerator;for(k in ocxProp){QQLiveOcx.setParam(k,ocxProp[k]);}
QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.PLAY,pub.setPlayStatus);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.STOP,pub.setStopStatus);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.PAUSE,pub.setPauseStatus);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.PROGESS,pub.setProgess);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.FULLSCREEN,pub.onFullScreenCall);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.MUTE,pub.setMute);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.VOLUMECHANGE,pub.setVolume);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.MOUSEMOVE,pub.onOcxMouseMove);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.VIDEOREADY,pub.onVideoReady);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.LOADSTART,pub.onLoadStart);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.LOADING,pub.onSetLoadingProgess);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.PLAYNEXT,showLoading);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.PLAYPREV,showLoading);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.CAN_NEXT,pub.onCanNext);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.CAN_PREV,pub.onCanPrev);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.OCX_INIT_FAILED,onOcxInitFailed);QQLiveOcx.bindCall(QQLiveSetup.DEFINE.EVENT.END,function(){QQLiveOcx.stop();pub.setStopStatus();});pub.bindHotKey();QQLiveOcx.init();},readyPlayer:function(){QQLiveSetup.debug("[readyPlayer]");setADV();ocxProp.autoPlay=(QQLiveSetup.param.getParamBool(ocxProp.autoPlay)&&(ocxProp.url.length>0));if(ocxProp.autoPlay){setTimeout(function(){initOcx();if(config.isAD){showAD();}
else{showLoading();ocxStart();}},250);QQLiveCtrl.setMarginTop(0);pub.initCtrl(false);}
else{if(!!config.previewPic){showPreviewPic();}
else{showPrefix();}
QQLiveCtrl.setMarginTop(0);pub.initCtrl(true);}
QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_ALL_INITED);},initPlayer:function(){},initCtrl:function(isHideOcx){QQLiveSetup.log("[initCtrl]:isHideOcx="+isHideOcx);var fullscreen=!isHideOcx;if(!adprovider.isPlayEnd()){fullscreen=false;}
if(ocxProp.url.length>0){ctrlSwf.setPlayBtnEnable(true);}
ctrlSwf.setVolumeCtrlBtnEnable(true);ctrlSwf.setVolumeCtrlBarEnable(true);ctrlSwf.setFullbtnEnable(fullscreen);ctrlSwf.setSwfVolume(parseInt(ocxProp.Volume));if(QQLiveSetup.param.getParamBool(ocxProp.Mute)){pub.setMute(true);}
if(ocxProp.autoPlay){pub.setPlayStatus(false);}
if(isHideOcx){ctrlSwf.setSwfPauseState();}
ctrlSwf.setStopBtnEnable(false);if(ocxProp.type==QQLiveSetup.DEFINE.VIDEOTYPE.LIVE){ctrlSwf.setLiveMode(true);}
if(ocxProp.url.length==0){ctrlSwf.setPlayBtnEnable(false);}},play:function(sso){QQLiveSetup.log("[play]:"+sso);if(isOutput(ELE_TYPE.ocx)==false){initOcx();}
if(sso==QQLiveOcx.getSSO()&&QQLiveOcx.getStatus()>QQLiveSetup.DEFINE.STATUS.STOP){return;}
if(!!QQLiveOcx&&QQLiveOcx.getStatus()>QQLiveSetup.DEFINE.STATUS.STOP){QQLiveOcx.stop();ctrlSwf.setPlayBtnEnable(false);}
QQLiveOcx.setParam("url",sso);if(!!adprovider.isNeedShowAd()){if(!adprovider.isAdDownload()){showAD();}
else{adprovider.showLoadingAD();}}
else{if(!isShow(ELE_TYPE.ad)){showLoading();}
isVideoReady=false;ocxStart(sso);}},setLiveStatus:function(){QQLiveSetup.log("[setLiveStatus]");ctrlSwf.setSwfPauseState();ctrlSwf.setPlayBtnEnable(false);ctrlSwf.setNextBtnEnable(false);ctrlSwf.setPreBtnEnable(false);ctrlSwf.setSeekbarEnable(false);},setPlayStatus:function(isshowocx){QQLiveSetup.log("[setPlayStatus]");if(isshowocx==undefined)
isshowocx=true;if(ctrlSwf&&typeof ctrlSwf.setSwfPlayState=="function"){var typemode=!!QQLiveOcx?QQLiveOcx.getType():ocxProp.type;if(typemode==QQLiveSetup.DEFINE.VIDEOTYPE.LIVE){pub.setLiveStatus();}
else{ctrlSwf.setSwfPlayState();ctrlSwf.setNextBtnEnable(!!QQLiveOcx?QQLiveOcx.isCanNext():false);ctrlSwf.setPreBtnEnable(!!QQLiveOcx?QQLiveOcx.isCanPrev():false);ctrlSwf.setSeekbarEnable(true);}
ctrlSwf.setStopBtnEnable(true);ctrlSwf.setFullbtnEnable(adprovider.isPlayEnd());if(!!isshowocx)
showOcx();if(!!QQLiveOcx&&isHasBtnCache(QQLiveSetup.DEFINE.EVENT.PAUSE)){QQLiveOcx.pause();clearBtnCache();}}},setPauseStatus:function(){QQLiveSetup.log("[setPauseStatus]");ctrlSwf.setSwfPauseState();ctrlSwf.setStopBtnEnable(true);ctrlSwf.setFullbtnEnable(true);},setStopStatus:function(){QQLiveSetup.log("[setStopStatus]");ctrlSwf.renewTimeCount();ctrlSwf.setSwfDownloadProgress(0);ctrlSwf.setSwfPauseState();ctrlSwf.setSeekbarEnable(false);if(!isShow(ELE_TYPE.loading)){timer.prefix=setTimeout(showPrefix,200);ctrlSwf.setStopBtnEnable(false);ctrlSwf.setFullbtnEnable(false);if(QQLiveOcx.getSSO().length>0){ctrlSwf.setPlayBtnEnable(true);}
else{ctrlSwf.setPlayBtnEnable(false);}}},setProgess:function(typeid,curV,TotV){if(typeid==QQLiveSetup.DEFINE.PROGRESS_EVENT.FLV_HEAD_TOTAL_TIME){curV=parseInt(curV*1000,10);TotV=parseInt(TotV*1000,10);ctrlSwf.setSwfPlayTime(curV,TotV);}
else if(typeid==QQLiveSetup.DEFINE.PROGRESS_EVENT.FLV_LOADING){ctrlSwf.setSwfDownloadProgress(TotV);}},onLoadStart:function(videotype){QQLiveSetup.log("[onLoadStart]");clearTimeout(timer.prefix);if(QQLiveOcx.getType()==QQLiveSetup.DEFINE.VIDEOTYPE.VOD){ctrlSwf.setSwfPlayState();}
else{pub.setLiveStatus();ctrlSwf.setLiveMode(true);}
ctrlSwf.setStopBtnEnable(adprovider.isPlayEnd());},onSetLoadingProgess:function(v){QQLiveSetup.debug("[onSetLoadingProgess]:"+v);v=v||0;v=isNaN(v)?0:v;v=parseInt(v,10);showLoadingProgess(v);},onPlayClick:function(){QQLiveSetup.log("[onPlayClick]");if(isOutput(ELE_TYPE.ocx)==false){initOcx();}
var status=QQLiveOcx.getStatus();if(status==QQLiveSetup.DEFINE.STATUS.PAUSE||status==QQLiveSetup.DEFINE.STATUS.Paused_Buffering){QQLiveOcx.play();return;}
if(!!config.isAD){if(!adprovider.isAdDownload()){showAD();}
else{adprovider.showLoadingAD();}}
else{showLoading();ocxStart();}
if(adprovider.isPlayEnd()&&!!ctrlSwf){ctrlSwf.setFullbtnEnable(true);}},onPauseClick:function(iscallback){QQLiveSetup.log("[onPauseClick]");iscallback=iscallback==undefined?true:iscallback;if(QQLiveOcx.getStatus()==QQLiveSetup.DEFINE.STATUS.LOADING||adprovider.isPlayEnd()==false){addBtnCache(QQLiveSetup.DEFINE.EVENT.PAUSE);return;}
QQLiveOcx.pause();if(!!iscallback){QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_CTRLBAR_EVENT_PAUSECLICK,"");}},onVideoReady:function(){QQLiveSetup.debug("video data is ready");playvideo();},onStopClick:function(){QQLiveSetup.log("[onStopClick]");if(!QQLiveOcx)
return;if(QQLiveOcx.getStatus()==QQLiveSetup.DEFINE.STATUS.LOADING){showPrefix();}
QQLiveOcx.stop();},setVolume:function(v,isShow){QQLiveSetup.log("[setVolume]");if(isShow==undefined)
isShow=false;if(isNaN(v))
return;v=v>100?100:v;v=v<0?0:v;ctrlSwf.setSwfVolume(v);},upVolume:function(){QQLiveSetup.log("[upVolume]");if(!QQLiveOcx||QQLiveOcx.isMute())
return;var v=QQLiveOcx.getVolume();if(v>=1000)
return;v=v+(v<100?10:30);v>=1000&&(v=1000);QQLiveOcx.setVolume(v,true);},downVolume:function(){QQLiveSetup.log("[downVolume]");if(!QQLiveOcx||QQLiveOcx.isMute())
return;var v=QQLiveOcx.getVolume();if(v<=0)
return;v=v-(v<=100?10:30);v<=0&&(v=0);QQLiveOcx.setVolume(v,true);},goFF:function(){QQLiveSetup.log("[goFF]");if(QQLiveOcx.isLive())
return;QQLiveOcx.startSeek();var curTime=QQLiveOcx.getCurrentTime();var totTime=QQLiveOcx.getTotalTime();curTime=curTime+5;QQLiveOcx.setCurrentTime(curTime);QQLiveOcx.showPrompt("快进: "+getVideoPlayTimes(curTime));var v=parseFloat(curTime/totTime)*100;QQLiveOcx.seek(v);},backward:function(){QQLiveSetup.log("[backward]");if(QQLiveOcx.isLive())
return;QQLiveOcx.startSeek();var curTime=QQLiveOcx.getCurrentTime();var totTime=QQLiveOcx.getTotalTime();curTime=curTime-5;if(curTime<0)
curTime=0;QQLiveOcx.setCurrentTime(curTime);var v=parseFloat(curTime/totTime)*100;QQLiveOcx.showPrompt("快退: "+getVideoPlayTimes(curTime));QQLiveOcx.seek(v);},onDragVolume:function(v){QQLiveSetup.log("[onDragVolume]");if(!QQLiveOcx){ocxProp.Volume=v;return;}
clearTimeout(timer.volume);timer.volume=setTimeout(function(){QQLiveOcx.setVolume(v);timer.volume=0;},20);},setMute:function(isMute){QQLiveSetup.debug("[setMute]:"+isMute);ctrlSwf.setSwfMute(!isMute?0:1);ctrlSwf.setVolumeCtrlBarEnable(!isMute);},onMuteClick:function(v){QQLiveSetup.debug("[onMuteClick]");if(!QQLiveOcx){ocxProp.Mute=v;}
else{QQLiveOcx.setMute(v);}},onStartSeek:function(){QQLiveSetup.debug("[onStartSeek]");QQLiveOcx.startSeek();},onDragProgress:function(v){QQLiveSetup.debug("[onDragProgress]");QQLiveOcx.seek(v);},onNextClick:function(){QQLiveSetup.debug("[onNextClick]");QQLiveOcx.playNext();},onPrevClick:function(){QQLiveSetup.debug("[onPrevClick]");QQLiveOcx.playPrev();},onCanPrev:function(){QQLiveSetup.debug("[onCanPrev]");if(!adprovider.isPlayEnd())
return;ctrlSwf.setPreBtnEnable(true);},onCanNext:function(){QQLiveSetup.debug("[onCanNext]");if(!adprovider.isPlayEnd())
return;ctrlSwf.setNextBtnEnable(true);},onFullScreenClick:function(isFull){QQLiveSetup.debug("[onFullScreenClick]");if(isFull!=undefined){QQLiveOcx.setFullScreen(isFull);}
else{QQLiveOcx.switchFullScreen();}
QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_CTRLBAR_EVENT_FULLSCREENCLICK,QQLiveOcx.isFullScreen());},onFullScreenCall:function(isFull){QQLiveSetup.debug("[onFullScreenCall]");var _ocx=QQLiveOcx.getOcx();if(isFull){if(isShow(ELE_TYPE.loading)){resetLoadingPosition(true);ocxDiv.style.marginTop=config.ctrlHeight;}
else if(isShow(ELE_TYPE.ad)){resetADPosition(true);ocxDiv.style.marginTop=config.ctrlHeight;}
_ocx.style.width=document.body.clientWidth;_ocx.style.height=document.body.clientHeight;ctrlSwf.style.width="100%";showDiv.style.height=document.body.clientHeight;QQLiveCtrl.setMarginTop(0);}
else{_ocx.style.width="100%"
_ocx.style.height=getOcxHeight();ctrlSwf.style.width="100%";showDiv.style.height=getOcxHeight();showDiv.style.left="0px";QQLiveCtrl.setMarginTop(0);if(isShow(ELE_TYPE.loading)){loadingSwf.style.marginLeft="0px";resetLoadingPosition(false);}
if(isShow(ELE_TYPE.ad)){adSwf.style.marginLeft="0px";resetADPosition(false);}}
ctrlSwf.setFullStatus(!isFull);QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_FULLSCREEN_SWITCH,isFull);},onTranslateAccelerator:function(keycode,ispress){QQLiveSetup.debug("[onTranslateAccelerator]:"+keycode+" "+ispress);if(QQLiveSetup.param.getParamBool(ispress)&&!(keycode in keyPressDict))
return;if(typeof keyCallDict[keycode]=="function"){keyCallDict[keycode].apply(QQLivePlayer);}},onOcxMouseMove:function(pos){if(!QQLiveOcx.isFullScreen()&&!config.hideCtrl)
return;var y=pos%65536;if(Math.abs(curMouseY-y)<=5)
return;curMouseY=y;var h=ocxDiv.offsetHeight;if(y>=h-50){QQLiveCtrl.setMarginTop(-1*config.ctrlHeight);}
else{timer.ctrlHide=setTimeout(function(){QQLiveCtrl.setMarginTop(0);},0);}},onCtrlMouseOver:function(){QQLiveSetup.debug("[onCtrlMouseOver]");clearTimeout(timer.ctrlHide);timer.ctrlHide=0;},onCtrlMouseOut:function(){QQLiveSetup.debug("[onCtrlMouseOut]");timer.ctrlHide=setTimeout(function(){QQLiveCtrl.setMarginTop(0);},0);},onPageLoaded:function(){QQLiveSetup.debug("QQLive_Ctrl_swfInit");QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_FLASH_INITED);QQLiveSetup.driverPage.ready();},onShellResize:function(w,h){},onJSError:function(){QQLiveSetup.debug("[onJSError]");try{QQLiveSetup.driverPage.sendMsg(QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_JS_ERROR);}
catch(e){}
return true;},ad:adprovider}
return pub;})();var QQLive_Ctrl_swfInit=QQLivePlayer.onPageLoaded;var QQLive_Ctrl_playMovie=QQLivePlayer.onPlayClick;var QQLive_Ctrl_stopMovie=QQLivePlayer.onStopClick;var QQLive_Ctrl_pauseMovie=QQLivePlayer.onPauseClick;var QQLive_Ctrl_setVolume=QQLivePlayer.onDragVolume;var QQLive_Ctrl_setMute=QQLivePlayer.onMuteClick;var QQLive_Ctrl_setFullScreen=QQLivePlayer.onFullScreenClick;var QQLive_Ctrl_setPlayProgress=QQLivePlayer.onDragProgress;var QQLive_Ctrl_nextMovie=QQLivePlayer.onNextClick;var QQLive_Ctrl_preMovie=QQLivePlayer.onPrevClick;var QQLive_Ctrl_seekStart=QQLivePlayer.onStartSeek;var QQLive_Ctrl_stageOver=QQLivePlayer.onCtrlMouseOver;var QQLive_Ctrl_stageOut=QQLivePlayer.onCtrlMouseOut;var QQLive_Loading_stageDoubleClick=QQLivePlayer.onFullScreenClick;var QQLive_AD_Error=QQLivePlayer.ad.onError;var QQLive_AD_Dataok=QQLivePlayer.ad.onDataOk;var QQLive_AD_DownloadComplete=QQLivePlayer.ad.onDownloadEnd;var QQLive_AD_PlayComplete=QQLivePlayer.ad.onPlayEnd;var QQLiveObject=function(vWidth,vHeight){var shellParam={},ocxParam={},ocxurlParam={},oldParam={},timer=[],isOldMode=false;var playpageParam={mousewheel:0,OldMode:0};var $me=this;var qqliveocxshell=null,curSSO;QQLiveObject.instance[QQLiveObject.instance.length+1]=this;this.width=vWidth;this.height=vHeight;this.inited=false;var config={shellId:"QQLiveOcxShell"};var getContainerId=function(container){return"QQLive_Player_20101122_"+container;};var createContainer=function(vElementId){var str="";str+="<div id=\""+getContainerId("installer")+"\"><\/div>";str+="<div id=\""+getContainerId("guide")+"\"><\/div>";str+="<div id=\""+getContainerId("player")+"\"><\/div>";getId(vElementId).innerHTML=str;};function buildOcxUrlParam(){var arr=[];for(var p in ocxurlParam){if(p==QQLiveSetup.param.driverurl.previewpic&&QQLiveSetup.param.getParamBool(ocxParam[QQLiveSetup.param.driver.autoplay]))
continue;arr.push(p+"="+encodeURIComponent(QQLiveSetup.param.filterXSS(ocxurlParam[p])));}
arr.push("h="+$me.height);arr.push("w="+$me.width);if(QQLiveSetup.isDebug){arr.push(QQLiveSetup.param.driverurl.debug+"=1");}
return arr.join("&");};function funCallBack(funName){var args=Array.prototype.slice.call(arguments,1);var strFn="on"+funName;if(typeof $me[strFn]=="function"){$me[strFn].apply($me,args);}};function onMsgCall(id,content){try{switch(id){case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_LOADSTART:{$me.callback(content);funCallBack(QQLiveSetup.DEFINE.EVENT.LOADSTART,content);break;}
case QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_FLASH_INITED:addTimer();funCallBack(QQLiveSetup.DEFINE.EVENT.DIRVER_PAGE_INITED);break;case QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_ALL_INITED:{addTimer();reportSpeed();funCallBack(QQLiveSetup.DEFINE.EVENT.OCX_READY);break;}
case QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_UPDATESSO:$me.setClientLink(content);break;case QQLiveSetup.DEFINE.MSG.LIVE_CTRLBAR_EVENT_PAUSECLICK:funCallBack(QQLiveSetup.DEFINE.EVENT.PAUSE_BTN_CLICK);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_PAUSED:funCallBack(QQLiveSetup.DEFINE.EVENT.PAUSE);break;case QQLiveSetup.DEFINE.MSG.LIVE_CTRLBAR_EVENT_FULLSCREENCLICK:funCallBack(QQLiveSetup.DEFINE.EVENT.FULLSCREEN_BTN_CLICK,content);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_FULLSCREEN_SWITCH:funCallBack(QQLiveSetup.DEFINE.EVENT.FULLSCREEN,content);break;case QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_JS_ERROR:funCallBack(QQLiveSetup.DEFINE.EVENT.SCRIPT_ERROR);break;case QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_OCX_INIT_FAILED:funCallBack(QQLiveSetup.DEFINE.EVENT.OCX_INIT_FAILED);break;case QQLiveSetup.DEFINE.MSG.LIVE_OCX_EVENT_ONMSG_STOPED:funCallBack(QQLiveSetup.DEFINE.EVENT.STOP);break;case QQLiveSetup.DEFINE.MSG.LIVE_DRIVERPAGE_EVENT_DEBUGLOG:QQLiveSetup.log(unescape(content));break;default:break;}}
catch(e){};};function onOldPlayerMsgCall(id,content){switch(id){case 1100:$me.callback(content);funCallBack(QQLiveSetup.DEFINE.EVENT.LOADSTART,content);break;default:break;}}
function addTimer(){if(!!$me.ping){timer.push(new Date().valueOf());}};function reportSpeed(){try{if(!$me.ping||timer.length!=6)
return;if(timer[5]-timer[4]<=0)
return;var s=[];for(var i=0;i<timer.length;i++){if(typeof timer[i]!="undefined"){s.push((i+1)+"="+(timer[i]-timer[0]+$me.speedOffset));}}
var url="http://isdspeed.qq.com/cgi-bin/r.cgi?flag1=1422&flag2=3&flag3=8&"+s.join("&");var imgSendTimePoint;imgSendTimePoint=new Image();imgSendTimePoint.src=url;}
catch(e){};};var _ctrl={Play:function(url){if(!qqliveocxshell)
return;qqliveocxshell.Play(url);},Stop:function(){if(!qqliveocxshell)
return;qqliveocxshell.Stop();},Pause:function(){if(!qqliveocxshell)
return;qqliveocxshell.Pause();}};this.ping=false;this.speedOffset=0;this.setClientLink=function(strValue){curSSO=strValue;};this.getSSO=function(){return curSSO;};this.openClient=function(){QQLiveSetup.player.openClient($me.getSSO());}
this.startup=function(){};this.addParam=function(k,v){k=k.toLowerCase();if(k in QQLiveSetup.param.oldParam){oldParam[QQLiveSetup.param.oldParam[k]]=v;}
if(k=="webskin"){if(v.toLowerCase()=="local://webskin/bbweb.xml"){ocxurlParam[QQLiveSetup.param.driverurl.ctrlbar]=QQLiveSetup.config.CTRLSWF_W_URL;ocxurlParam[QQLiveSetup.param.driverurl.ctrlheight]="32";}}
else if(k in QQLiveSetup.param.playpage){playpageParam[QQLiveSetup.param.playpage[k]]=v;}
else if(k in QQLiveSetup.param.shell){shellParam[QQLiveSetup.param.shell[k]]=v;}
else if(k in QQLiveSetup.param.ocx){ocxParam[QQLiveSetup.param.ocx[k]]=v;}
else if(k in QQLiveSetup.param.driver){if(k=="type"){v=v!="1"?QQLiveSetup.DEFINE.VIDEOTYPE.VOD:QQLiveSetup.DEFINE.VIDEOTYPE.LIVE;}
ocxParam[QQLiveSetup.param.driver[k]]=v;}
else if(k in QQLiveSetup.param.driverurl){ocxurlParam[QQLiveSetup.param.driverurl[k]]=v;}
if($me.inited){qqliveocxshell.setParam(k,v);}};this.destory=function(){if(typeof this.beforeDestory=="function"&&this.beforeDestory()==false){return;}
QQLiveSetup.debug("ready to destory...");if((!!QQLiveSetup.browser.ie)&&!!QQLiveSetup.installer.installerObj){try{QQLiveSetup.installer.installerObj.Destroy();QQLiveSetup.installer.installerObj=null;delete QQLiveSetup.installer.installerObj;QQLiveSetup.debug("destory successful");}
catch(e){QQLiveSetup.debug("destory failed");}}};this.getCtrl=function(){if(!isOldMode)
return _ctrl;return getId("QQLiveOldOcx")||null;};this.showGuideFlash=function(vElementId,bMMInstalled,oldMode){var _guideswf=QQLiveSetup.config.GUIDE_SWF;var _host=window.location.hostname||window.location.host;var _sarray=location.host.split(".");if(_sarray.length>1){_host=_sarray.slice(_sarray.length-2).join(".");}
if(_host.toLowerCase()=="qq.com"){_guideswf=QQLiveSetup.config.GUIDE_SWF_IMGCACHE;}
var strHtml="";strHtml+="<OBJECT ID=\"UISWF\" CLASSID=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\""+QQLiveSetup.config.FLASH_CAB+"\" width=\""+this.width+"\" height=\""+this.height+"\"  >\n";strHtml+=" <param name=\"movie\" value=\""+_guideswf+"\" />\n";strHtml+=" <param name=\"allowscriptaccess\" value=\"always\"/>\n"
strHtml+=" <param name=\"wmode\" value=\"Opaque\">";strHtml+=" <embed src=\""+_guideswf+"\""+" width=\""+this.width+"\" height=\""+this.height+"\" quality=\"high\" allowscriptaccess=\"always\" wmode=\"transparent\" name = \"UISWF\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" type=\"application/x-shockwave-flash\"></embed>";strHtml+="</OBJECT>\n";getId(getContainerId("guide")).innerHTML=strHtml;if(oldMode&&!bMMInstalled&&QQLiveSetup.installer.timer==null){QQLiveSetup.installer.timer=setInterval(QQLiveSetup.installer.checkMMIsInstall,500);}};this.showFlashInstall=function(vElementId){var strHtml="";strHtml+="<div style=\"position:relative;height:"+this.height+"px;width:"+this.width+"px;font-size:12px;border:1px solid #000000;background:#000000;\">"
strHtml+="<div style=\"position:absolute;top:50%;left:50%;width:300px;height:85px;margin:-40px 0 0 -150px;text-align:left; overflow:hidden;\">"
strHtml+="<h1 style=\"height:40px;margin:0 0 0 0;padding:0;color:#FF9902;font-size:18px;font-weight:bold;\">您尚未安装Flash播放器或版本过低</h1>"
strHtml+="<p style=\"height:26px;margin:0;padding:0;color:#a0a0a0;\">请点击<a href=\"##\" onclick=\"window.location.href='"
strHtml+=!!QQLiveSetup.browser.ie?QQLiveSetup.config.FLASH_SETUP_AX:QQLiveSetup.config.FLASH_SETUP_PLUGIN;strHtml+="'\" style=\"margin:0 3px;color:#FF9902;text-decoration:underline;\">下载到本地</a>，然后手动安装Flash播放器</p>"
strHtml+="<p style=\"height:14px;margin:0;padding:0;color:#a0a0a0;\">（安装完成后，请点击<a href=\"##\" onclick=\"javascript:window.location.reload()\" style=\"margin:0 3px;color:#FF9902;text-decoration:underline;\">刷新</a>该页面）</p>"
strHtml+="</div>"
strHtml+="</div>"
getId(getContainerId("guide")).innerHTML=strHtml;};this.showIEPlayer=function(vElementId){var strHtml="";strHtml="<Object id='"+config.shellId+"' width="+this.width;strHtml+=" height="+this.height;strHtml+=" classid=CLSID:";strHtml+=QQLiveSetup.config.SEHLL_CLSID;strHtml+=" standby=\"Loading Tencent QQ视频 componets...\">";for(var p in shellParam){if(shellParam[p]!=null){if(p==QQLiveSetup.param.shell.ocxurl){var _p=buildOcxUrlParam();if(_p.length>0){shellParam[p]+=(shellParam[p].indexOf("?")>0?"&":"?")+_p;}}
strHtml+=" <param name=\""+p+"\" value=\""+shellParam[p]+"\">";}}
strHtml+=" </Object>";getId(getContainerId("player")).innerHTML=strHtml;qqliveocxshell=document.getElementById(config.shellId);for(var p in ocxParam){qqliveocxshell.setParam(p,ocxParam[p]);}
qqliveocxshell.setParam("width",this.width);qqliveocxshell.setParam("height",this.height);var _oid=QQLiveSetup.param.getUrlParam("oid");if(!!_oid){qqliveocxshell.setParam("oid",""+_oid);}
qqliveocxshell.Init();qqliveocxshell.attachEvent("OnMsg",onMsgCall);};this.showOldIEPlayer=function(vElementId){var strHtml="";strHtml="<Object id='QQLiveOldOcx' width="+this.width;strHtml+=" height="+this.height;strHtml+=" classid=CLSID:"+QQLiveSetup.config.OLD_IE_CLSID;strHtml+=" standby=\"Loading Tencent QQ视频 componets...\">";oldParam["ClientMode"]="3";if(!oldParam["MediaFun"]){oldParam["MediaFun"]="MediaFun://ctrlbar|ad|";}
for(var p in oldParam){if(oldParam[p]!=null){strHtml+=" <PARAM NAME=\""+p+"\" VALUE=\""+oldParam[p]+"\">";}}
strHtml+=" </Object>";getId(getContainerId("player")).innerHTML=strHtml;var playerobj=getId("QQLiveOldOcx");if(!!playerobj)
playerobj.attachEvent("OnMsg",onOldPlayerMsgCall);}
this.showFFPlayer=function(vElementId){if(!QQLiveSetup.browser.isNotIESupport()){return;}
var strHtml="";strHtml="<embed id=\""+config.shellId+"\" name=\""+config.shellId+"\" width="+this.width+" height="+this.height;strHtml+=" type=\"application/tecent-qqlive-plugin\">";getId(getContainerId("player")).innerHTML=strHtml;qqliveocxshell=getId(config.shellId);for(var p in shellParam){if(p==QQLiveSetup.param.shell.ocxurl){var _p=buildOcxUrlParam();if(_p.length>0)
shellParam[p]+="?"+_p;}
qqliveocxshell[p]=shellParam[p];}
qqliveocxshell.CreateAX("LiveOcxShell");for(var p in ocxParam){var v=ocxParam[p]+"";qqliveocxshell.SetParam(p,v);}
qqliveocxshell.SetParam("width",$me.width+"");qqliveocxshell.SetParam("height",$me.height+"");var _oid=QQLiveSetup.param.getUrlParam("oid");if(!!_oid){qqliveocxshell.SetParam("oid",""+_oid);}
qqliveocxshell.Init();try{qqliveocxshell.AddEventListener("OnMsg",onMsgCall,false);}
catch(er){};};this.showOldFFPlayer=function(){if(!QQLiveSetup.browser.isNotIESupport()){return;}
var strHtml="";strHtml="<embed id=QQLiveOldOcx width="+this.width+" height="+this.height;strHtml+=" type=\"application/tecent-qqlive-plugin\">";getId(getContainerId("player")).innerHTML=strHtml;var ocx=getId('QQLiveOldOcx');oldParam["ClientMode"]="3";if(!oldParam["MediaFun"]){oldParam["MediaFun"]="MediaFun://ctrlbar|ad|";}
for(var p in oldParam){QQLiveSetup.debug(p+"="+oldParam[p]);ocx[p]=oldParam[p];}
ocx.CreateAX("LiveMedia.dll");var playerobj=getId("QQLiveOldOcx");if(!!playerobj)
playerobj.AddEventListener("OnMsg",onOldPlayerMsgCall,false);}
this.write=function(containerId){addTimer();if(!QQLiveSetup.param.getParamBool(shellParam.mousewheel)){QQLiveSetup.event.closeMousewheel();}
getId(containerId).style.backgroundColor="#000000";createContainer(containerId);var bMMInstallerValied=!!QQLiveSetup.installer.isMMInstalled();if(!bMMInstallerValied){QQLiveSetup.installer.showInstallerObject(getContainerId("installer"));}
addTimer();var bVerUsable=QQLiveSetup.version.check();addTimer();funCallBack(QQLiveSetup.DEFINE.EVENT.CHECK_VERSION,bVerUsable);QQLiveSetup.event.reportTCSSHot(bVerUsable?"INSTALL.YES":"INSTALL.NO",1);if(!bVerUsable){if(QQLiveSetup.param.getParamBool(playpageParam[QQLiveSetup.param.playpage.oldmode])){var bHasOldVersion=QQLiveSetup.version.hasOldVersion();if(bHasOldVersion){if(!!QQLiveSetup.browser.ie){$me.showOldIEPlayer(containerId);}
else if(QQLiveSetup.browser.isNotIESupport()){$me.showOldFFPlayer(containerId);}
isOldMode=true;funCallBack(QQLiveSetup.DEFINE.EVENT.OCX_READY);return;}}
var isFlashValid=QQLiveSetup.flash.isFlashVerVaild();funCallBack(QQLiveSetup.DEFINE.EVENT.CHECK_FLASH,isFlashValid);QQLiveSetup.event.reportTCSSHot(isFlashValid?"FLASH.YES":"FLASH.NO",2);if(!isFlashValid){$me.showFlashInstall(containerId);return false;}
var bMMInstalled=QQLiveSetup.installer.isMMInstalled();funCallBack(QQLiveSetup.DEFINE.EVENT.CHECK_MMINSTALLER,bMMInstalled);QQLiveSetup.event.reportTCSSHot(bMMInstalled?"MMINSTALLER.YES":"MMINSTALLER.NO",4);if(!QQLiveSetup.browser.isBrwValid()||!bMMInstalled||!bVerUsable){window.onbeforeunload=function(){$me.destory();};$me.showGuideFlash(containerId,bMMInstalled,true);return;}}
if(!shellParam[QQLiveSetup.param.shell.ocxurl]){shellParam[QQLiveSetup.param.shell.ocxurl]=QQLiveSetup.config.OCX_URL;}
if(typeof shellParam[QQLiveSetup.param.shell.hidescripterr]=="undefined"){shellParam[QQLiveSetup.param.shell.hidescripterr]=false;}
if(!!QQLiveSetup.browser.ie){$me.showIEPlayer(containerId);}
else if(QQLiveSetup.browser.isNotIESupport()){$me.showFFPlayer(containerId);}
addTimer();funCallBack(QQLiveSetup.DEFINE.EVENT.SHOW_PLAYER);this.inited=true;};this.play=function(containerId){this.write(containerId);};this.callback=function(){};this.bindCall=function(funName,fn){this["on"+funName]=QQLiveSetup.event.bind(this,fn);};};QQLiveObject.instance=[];/*  |xGv00|77823c04ba7399cfeede4fea1345e587 */